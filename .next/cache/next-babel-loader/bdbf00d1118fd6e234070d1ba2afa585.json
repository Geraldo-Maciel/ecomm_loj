{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"F:\\\\ASSESSOR_ECO\\\\ECO_LOJ\\\\components\\\\Item\\\\Frete.js\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport actions from '../../redux/actions';\nimport { getCart } from '../../utils/cart';\nimport { formatMoney, codigosCorreios } from '../../utils';\nimport { formatCEP } from '../../utils/format';\n\nvar Frete = /*#__PURE__*/function (_Component) {\n  _inherits(Frete, _Component);\n\n  var _super = _createSuper(Frete);\n\n  function Frete(props) {\n    var _this;\n\n    _classCallCheck(this, Frete);\n\n    _this = _super.call(this);\n\n    _defineProperty(_assertThisInitialized(_this), \"onChangeCEP\", function (e) {\n      _this.setState({\n        cep: formatCEP(e.target.value)\n      });\n    });\n\n    _this.state = {\n      cep: props.cep || \"\"\n    };\n    return _this;\n  }\n\n  _createClass(Frete, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (!prevProps.fretes && this.props.fretes && !this.props.freteSelecionado) {\n        this.props.selecionarFrete(this.props.fretes[0]);\n      }\n    }\n  }, {\n    key: \"selectFrete\",\n    value: function selectFrete(codigo, fretes) {\n      var frete = fretes.reduce(function (all, frete) {\n        return frete.Codigo.toString() === codigo ? frete : all;\n      }, {});\n      this.props.selecionarFrete(frete); //        console.log('selectfrete-frete: ', frete);\n    }\n  }, {\n    key: \"renderOpcoesFrete\",\n    value: function renderOpcoesFrete() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          fretes = _this$props.fretes,\n          freteSelecionado = _this$props.freteSelecionado;\n      if (!fretes || !freteSelecionado) return null; //        console.log('renderopcoesfrete-fretes: ', fretes);\n      //        console.log('renderopcoesfrete-freteSelecionado: ', freteSelecionado);\n\n      return __jsx(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 13\n        }\n      }, __jsx(\"select\", {\n        value: freteSelecionado.Codigo,\n        onChange: function onChange(e) {\n          return _this2.selectFrete(e.target.value, fretes);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 17\n        }\n      }, fretes.map(function (frete, index) {\n        return __jsx(\"option\", {\n          value: frete.Codigo,\n          key: frete.Codigo,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 44,\n            columnNumber: 29\n          }\n        }, codigosCorreios[frete.Codigo], \" \\xA0 (\", frete.PrazoEntrega, \" dias \\xFAteis) -\\xA0\", formatMoney(frete.Valor.replace(\",\", \".\")));\n      })));\n    }\n  }, {\n    key: \"renderOpcaoSelecionada\",\n    value: function renderOpcaoSelecionada() {\n      var _this$props2 = this.props,\n          freteSelecionado = _this$props2.freteSelecionado,\n          cleanFretes = _this$props2.cleanFretes;\n      if (!freteSelecionado || !freteSelecionado.Valor) return null;\n      return __jsx(\"div\", {\n        className: \"flex vertical flex-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 13\n        }\n      }, __jsx(\"h4\", {\n        className: \"valor-frete\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 17\n        }\n      }, formatMoney(freteSelecionado.Valor.replace(\",\", \".\"))), __jsx(\"span\", {\n        className: \"limpar-CEP\",\n        onClick: function onClick() {\n          return cleanFretes();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 17\n        }\n      }, \"Limpar CEP\"));\n    }\n  }, {\n    key: \"calcularFrete\",\n    value: function calcularFrete() {\n      var cep = this.state.cep;\n      if (!cep || cep.length !== 9) return alert(\"Digite o CEP corretamente.\");\n      this.props.calcularFrete(cep, getCart());\n    }\n  }, {\n    key: \"renderFormularioCEP\",\n    value: function renderFormularioCEP() {\n      var _this3 = this;\n\n      return __jsx(\"div\", {\n        className: \"flex-1 flex\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 13\n        }\n      }, __jsx(\"div\", {\n        className: \"flex-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 17\n        }\n      }, __jsx(\"input\", {\n        value: this.state.cep,\n        name: \"CEP\",\n        className: \"campo-frete\",\n        onChange: this.onChangeCEP,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }\n      })), __jsx(\"div\", {\n        className: \"flex-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 17\n        }\n      }, __jsx(\"button\", {\n        className: \"btn btn-primary btn-sm\",\n        onClick: function onClick() {\n          return _this3.calcularFrete();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 21\n        }\n      }, \"CALCULAR\")));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return __jsx(\"div\", {\n        className: \"dados-do-carrinho-item flex\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 13\n        }\n      }, __jsx(\"div\", {\n        className: \"flex-1 flex vertical\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 17\n        }\n      }, __jsx(\"p\", {\n        className: \"headline\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 21\n        }\n      }, \" Frete \"), this.props.freteSelecionado && this.renderOpcoesFrete()), __jsx(\"div\", {\n        className: \"flex-1 flex-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 17\n        }\n      }, this.props.freteSelecionado ? this.renderOpcaoSelecionada() : this.renderFormularioCEP()));\n    }\n  }]);\n\n  return Frete;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    carrinho: state.carrinho.carrinho,\n    freteSelecionado: state.carrinho.freteSelecionado,\n    fretes: state.carrinho.fretes,\n    cep: state.carrinho.cep\n  };\n};\n\nexport default connect(mapStateToProps, actions)(Frete);","map":{"version":3,"sources":["F:/ASSESSOR_ECO/ECO_LOJ/components/Item/Frete.js"],"names":["React","Component","connect","actions","getCart","formatMoney","codigosCorreios","formatCEP","Frete","props","e","setState","cep","target","value","state","prevProps","fretes","freteSelecionado","selecionarFrete","codigo","frete","reduce","all","Codigo","toString","selectFrete","map","index","PrazoEntrega","Valor","replace","cleanFretes","length","alert","calcularFrete","onChangeCEP","renderOpcoesFrete","renderOpcaoSelecionada","renderFormularioCEP","mapStateToProps","carrinho"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\n\r\nimport {connect} from 'react-redux';\r\nimport actions from '../../redux/actions';\r\nimport {getCart} from '../../utils/cart';\r\nimport {formatMoney, codigosCorreios} from '../../utils';\r\nimport {formatCEP} from '../../utils/format';\r\n\r\nclass Frete extends Component {\r\n\r\n    constructor (props) {\r\n        super();\r\n        this.state = { \r\n            cep: props.cep || \"\"\r\n        };\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if ( !prevProps.fretes && this.props.fretes && !this.props.freteSelecionado) {\r\n            this.props.selecionarFrete(this.props.fretes[0]);\r\n        }\r\n    }\r\n\r\n    selectFrete(codigo, fretes) {\r\n        const frete = fretes.reduce(\r\n            (all, frete) => frete.Codigo.toString() === codigo ? frete : all, {}\r\n        );\r\n        this.props.selecionarFrete(frete);\r\n//        console.log('selectfrete-frete: ', frete);\r\n    }\r\n\r\n    renderOpcoesFrete () {\r\n        const {fretes, freteSelecionado} = this.props;\r\n        if ( !fretes || !freteSelecionado) return null;\r\n//        console.log('renderopcoesfrete-fretes: ', fretes);\r\n//        console.log('renderopcoesfrete-freteSelecionado: ', freteSelecionado);\r\n        return (\r\n            <div>\r\n                <select \r\n                    value = {freteSelecionado.Codigo}\r\n                    onChange = {(e) => this.selectFrete(e.target.value, fretes)}>\r\n                    {\r\n                        fretes.map((frete, index) => (\r\n                            <option value={frete.Codigo} key={frete.Codigo}>\r\n                                {codigosCorreios[frete.Codigo]} &nbsp;\r\n                                ({frete.PrazoEntrega} dias Ãºteis) -&nbsp;\r\n                                {formatMoney(frete.Valor.replace(\",\", \".\"))}\r\n                            </option>\r\n                        ))\r\n                    }\r\n                </select>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    renderOpcaoSelecionada () {\r\n        const {freteSelecionado, cleanFretes} = this.props;\r\n        if ( !freteSelecionado || !freteSelecionado.Valor) return null;\r\n        return (\r\n            <div className = \"flex vertical flex-center\">\r\n                <h4 className = \"valor-frete\">\r\n                    {\r\n                        formatMoney(freteSelecionado.Valor.replace(\",\", \".\"))\r\n                    }\r\n                </h4>\r\n                <span \r\n                    className = \"limpar-CEP\"\r\n                    onClick = {() => cleanFretes()}>\r\n                    Limpar CEP\r\n                </span>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    calcularFrete () {\r\n        const {cep} = this.state;\r\n        if (!cep || cep.length !== 9) return alert(\"Digite o CEP corretamente.\");\r\n        this.props.calcularFrete(cep, getCart());\r\n    }\r\n\r\n    onChangeCEP = (e) => {\r\n        this.setState({cep: formatCEP(e.target.value)})\r\n    }\r\n\r\n    renderFormularioCEP () {\r\n        return (\r\n            <div className = \"flex-1 flex\">\r\n                <div className = \"flex-3\">\r\n                    <input \r\n                        value = {this.state.cep} \r\n                        name = \"CEP\" \r\n                        className = \"campo-frete\"\r\n                        onChange = {this.onChangeCEP} />\r\n                </div>\r\n                <div className = \"flex-1\">\r\n                    <button \r\n                        className = \"btn btn-primary btn-sm\"\r\n                        onClick = {() => this.calcularFrete()}>\r\n                        CALCULAR\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    render () {\r\n        return (\r\n            <div className = \"dados-do-carrinho-item flex\">\r\n                <div className = \"flex-1 flex vertical\">\r\n                    <p className = \"headline\"> Frete </p>\r\n                    {this.props.freteSelecionado && this.renderOpcoesFrete()}\r\n                </div>\r\n                <div className = \"flex-1 flex-center\">\r\n                    {this.props.freteSelecionado ? \r\n                        this.renderOpcaoSelecionada() : \r\n                        this.renderFormularioCEP() \r\n                    }\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    carrinho: state.carrinho.carrinho,\r\n    freteSelecionado: state.carrinho.freteSelecionado,\r\n    fretes: state.carrinho.fretes,\r\n    cep: state.carrinho.cep\r\n});\r\n\r\nexport default connect(mapStateToProps, actions) (Frete);"]},"metadata":{},"sourceType":"module"}
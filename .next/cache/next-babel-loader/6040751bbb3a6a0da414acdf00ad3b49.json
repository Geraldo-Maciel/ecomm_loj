{"ast":null,"code":"import { FETCH_CLIENTE, LOGOUT_CLIENTE } from '../types';\nimport axios from 'axios';\nimport { API, versao, loja } from '../../config';\nimport { setCookie } from '../../utils/cookie';\nimport { getHeaders } from './helpers';\nimport Router from 'next/router';\nimport { autenticar, desautenticar } from './authActions';\nimport errorHandling from './errorHandling';\nexport var getRawData = function getRawData(data) {\n  var _data = data.split('/');\n\n  var ano = _data[2];\n\n  var _mes = _data[1] - 1;\n\n  var mes = _mes < 10 ? \"0\" + _mes : _mes;\n\n  var _dia = Number(_data[0]);\n\n  var dia = _dia < 10 ? \"0\" + _dia : _dia;\n  return \"\".concat(ano, \"-\").concat(mes, \"-\").concat(dia);\n};\nexport var fetchCliente = function fetchCliente(id, token) {\n  return function (dispatch) {\n    axios.get(\"\".concat(API, \"/\").concat(versao, \"/api/clientes/\").concat(id, \"?loja=\").concat(loja), getHeaders(token)).then(function (resposta) {\n      dispatch({\n        type: FETCH_CLIENTE,\n        payload: resposta.data\n      });\n    })[\"catch\"](function (e) {\n      return console.log(e);\n    });\n  };\n};\nexport var newCliente = function newCliente(form, cb) {\n  return function (dispatch) {\n    axios.post(\"\".concat(API, \"/\").concat(versao, \"/api/clientes?loja=\").concat(loja), {\n      nome: form.nome,\n      senha: form.senha,\n      cpf: form.CPF,\n      email: form.email,\n      telefones: [form.telefone],\n      endereco: {\n        local: form.local,\n        numero: form.numero,\n        complemento: form.complemento,\n        bairro: form.bairro,\n        cidade: form.cidade,\n        estado: form.estado,\n        CEP: form.CEP\n      },\n      dataDeNascimento: getRawData(form.dataDeNascimento)\n    }).then(function (response) {\n      dispatch({\n        type: FETCH_CLIENTE,\n        payload: response.data\n      });\n      dispatch(autenticar({\n        email: form.email,\n        senha: form.senha\n      }, null, cb));\n      cb(null);\n    })[\"catch\"](function (e) {\n      return cb(errorHandling(e));\n    });\n  };\n};\nexport var updateCliente = function updateCliente(form, id, token, cb) {\n  return function (dispatch) {\n    axios.put(\"\".concat(API, \"/\").concat(versao, \"/api/clientes/\").concat(id, \"?loja=\").concat(loja), {\n      nome: form.nome,\n      cpf: form.CPF,\n      telefones: [form.telefone],\n      endereco: {\n        local: form.local,\n        numero: form.numero,\n        complemento: form.complemento,\n        bairro: form.bairro,\n        cidade: form.cidade,\n        estado: form.estado,\n        CEP: form.CEP\n      },\n      dataDeNascimento: getRawData(form.dataDeNascimento)\n    }, getHeaders(token)).then(function (response) {\n      dispatch({\n        type: FETCH_CLIENTE,\n        payload: response.data\n      });\n      cb(null);\n    })[\"catch\"](function (e) {\n      return cb(errorHandling(e));\n    });\n  };\n};\nexport var logoutCliente = function logoutCliente() {\n  return function (dispatch) {\n    dispatch(desautenticar());\n    dispatch({\n      type: LOGOUT_CLIENTE\n    });\n  };\n};\nexport default {\n  fetchCliente: fetchCliente,\n  newCliente: newCliente,\n  updateCliente: updateCliente,\n  logoutCliente: logoutCliente\n};","map":{"version":3,"sources":["F:/APLICACAO/lojavirtual/redux/actions/clienteActions.js"],"names":["FETCH_CLIENTE","LOGOUT_CLIENTE","axios","API","versao","loja","setCookie","getHeaders","Router","autenticar","desautenticar","errorHandling","getRawData","data","_data","split","ano","_mes","mes","_dia","Number","dia","fetchCliente","id","token","dispatch","get","then","resposta","type","payload","e","console","log","newCliente","form","cb","post","nome","senha","cpf","CPF","email","telefones","telefone","endereco","local","numero","complemento","bairro","cidade","estado","CEP","dataDeNascimento","response","updateCliente","put","logoutCliente"],"mappings":"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","sourcesContent":["import { \r\n    FETCH_CLIENTE,\r\n    LOGOUT_CLIENTE\r\n} from '../types';\r\nimport axios from 'axios';\r\nimport {API, versao, loja} from '../../config';\r\nimport {setCookie} from '../../utils/cookie';\r\nimport {getHeaders} from './helpers';\r\nimport Router from 'next/router';\r\nimport {autenticar, desautenticar} from './authActions';\r\nimport errorHandling from './errorHandling';\r\n\r\nexport const getRawData = (data) => {\r\n    let _data = data.split('/');\r\n    let ano = _data[2];\r\n    let _mes = _data[1] - 1;\r\n    let mes = _mes < 10 ? \"0\" + _mes : _mes;\r\n    let _dia = Number(_data[0]);\r\n    let dia = _dia < 10 ? \"0\" + _dia: _dia;\r\n    return `${ano}-${mes}-${dia}`;\r\n};\r\n\r\nexport const fetchCliente = (id, token) => dispatch => {\r\n    axios.get(`${API}/${versao}/api/clientes/${id}?loja=${loja}`, getHeaders(token))\r\n    .then ((resposta) => {\r\n        dispatch({type: FETCH_CLIENTE, payload: resposta.data})\r\n    })\r\n    .catch (e => console.log(e));\r\n}\r\n\r\nexport const newCliente = (form, cb) => dispatch => {\r\n    axios.post(`${API}/${versao}/api/clientes?loja=${loja}`, {\r\n        nome: form.nome,\r\n        senha: form.senha,\r\n        cpf: form.CPF,\r\n        email: form.email,\r\n        telefones: [form.telefone],\r\n        endereco: {\r\n            local: form.local,\r\n            numero: form.numero,\r\n            complemento: form.complemento,\r\n            bairro: form.bairro,\r\n            cidade: form.cidade,\r\n            estado: form.estado,\r\n            CEP: form.CEP\r\n        },\r\n        dataDeNascimento: getRawData(form.dataDeNascimento)\r\n    })\r\n    .then ((response) => {\r\n        dispatch({type: FETCH_CLIENTE, payload: response.data});\r\n        dispatch(autenticar({email: form.email, senha: form.senha}, null, cb));\r\n        cb(null);\r\n    })\r\n    .catch (e => cb(errorHandling(e)));\r\n};\r\n\r\nexport const updateCliente = (form, id, token, cb) => dispatch => {\r\n    axios.put(`${API}/${versao}/api/clientes/${id}?loja=${loja}`, {\r\n        nome: form.nome,\r\n        cpf: form.CPF,\r\n        telefones: [form.telefone],\r\n        endereco: {\r\n            local: form.local,\r\n            numero: form.numero,\r\n            complemento: form.complemento,\r\n            bairro: form.bairro,\r\n            cidade: form.cidade,\r\n            estado: form.estado,\r\n            CEP: form.CEP\r\n        },\r\n        dataDeNascimento: getRawData(form.dataDeNascimento)\r\n    }, getHeaders(token))\r\n    .then ((response) => {\r\n        dispatch({type: FETCH_CLIENTE, payload: response.data});\r\n        cb(null);\r\n    })\r\n    .catch (e => cb(errorHandling(e)));\r\n}\r\n\r\nexport const logoutCliente = () => dispatch => {\r\n    dispatch(desautenticar());\r\n    dispatch({type: LOGOUT_CLIENTE})\r\n}\r\n\r\nexport default {\r\n    fetchCliente,\r\n    newCliente,\r\n    updateCliente,\r\n    logoutCliente\r\n};"]},"metadata":{},"sourceType":"module"}
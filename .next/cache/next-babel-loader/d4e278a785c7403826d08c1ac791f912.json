{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"F:\\\\ASSESSOR_ECO\\\\ECO_LOJ\\\\containers\\\\Checkout\\\\DadosPagamento.js\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport FormRadio from '../../components/Inputs/FormRadio';\nimport FormSimples from '../../components/Inputs/FormSimples';\nimport { connect } from 'react-redux';\nimport actions from '../../redux/actions';\nimport { formatCPF, formatCartao, formatNumber } from '../../utils/format';\nimport { formatMoney } from '../../utils';\nimport { validateCPF } from '../../utils/validate';\n\nvar DadosPagamento = /*#__PURE__*/function (_Component) {\n  _inherits(DadosPagamento, _Component);\n\n  var _super = _createSuper(DadosPagamento);\n\n  function DadosPagamento() {\n    var _this;\n\n    _classCallCheck(this, DadosPagamento);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      erros: {}\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onChange\", function (field, value) {\n      return _this.props.setForm(_defineProperty({}, field, value)).then(function () {\n        return _this.validate();\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(DadosPagamento, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.getSessionPagamento();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props$form = this.props.form,\n          numeroCartao = _this$props$form.numeroCartao,\n          mesCartao = _this$props$form.mesCartao,\n          anoCartao = _this$props$form.anoCartao,\n          CVVCartao = _this$props$form.CVVCartao,\n          credit_card_token = _this$props$form.credit_card_token,\n          bandeira_cartao = _this$props$form.bandeira_cartao,\n          parcelasCartao = _this$props$form.parcelasCartao;\n\n      if (!bandeira_cartao && numeroCartao && numeroCartao.split(' ').join('').length > 7) {\n        this.getBrand();\n      }\n\n      if (!credit_card_token && numeroCartao && numeroCartao.split(' ').join('').length === 16 && mesCartao && mesCartao.length === 2 && anoCartao && anoCartao.length === 4 && CVVCartao && CVVCartao.length === 3 && bandeira_cartao) this.submitCartaoHash();\n      if (!parcelasCartao && bandeira_cartao || parcelasCartao && bandeira_cartao && prevProps.freteSelecionado !== this.props.freteSelecionado) this.getParcelas();\n    }\n  }, {\n    key: \"getBrand\",\n    value: function getBrand() {\n      var _this2 = this;\n\n      var numeroCartao = this.props.form.numeroCartao;\n      PagSeguroDirectPayment.getBrand({\n        cardBin: numeroCartao.split(' ').join('').slice(0, 6),\n        success: function success(r) {\n          return _this2.props.setForm({\n            bandeira_cartao: r.brand\n          });\n        },\n        error: function error(r) {\n          return console.log(r);\n        }\n      });\n    }\n  }, {\n    key: \"submitCartaoHash\",\n    value: function submitCartaoHash() {\n      var _this3 = this;\n\n      var _this$props$form2 = this.props.form,\n          numeroCartao = _this$props$form2.numeroCartao,\n          mesCartao = _this$props$form2.mesCartao,\n          anoCartao = _this$props$form2.anoCartao,\n          CVVCartao = _this$props$form2.CVVCartao,\n          bandeira_cartao = _this$props$form2.bandeira_cartao;\n      var params = {\n        cardNumber: numeroCartao.split(' ').join(''),\n        brand: bandeira_cartao.name,\n        cvv: CVVCartao,\n        expirationMonth: mesCartao,\n        expirationYear: anoCartao,\n        success: function success(r) {\n          _this3.props.setForm({\n            credit_card_token: r.card.token\n          });\n        },\n        error: function error(r) {\n          return console.log(r);\n        }\n      };\n      PagSeguroDirectPayment.createCardToken(params);\n    }\n  }, {\n    key: \"getParcelas\",\n    value: function getParcelas() {\n      var _this4 = this;\n\n      var _this$props = this.props,\n          freteSelecionado = _this$props.freteSelecionado,\n          carrinho = _this$props.carrinho;\n      var bandeira_cartao = this.props.form.bandeira_cartao;\n      var valorTotal = carrinho.reduce(function (all, item) {\n        return all + Number(item.precoUnitario) * Number(item.quantidade);\n      }, 0);\n      var freteValor = Number(freteSelecionado.Valor.replace(',', '.'));\n      PagSeguroDirectPayment.getInstallments({\n        amount: valorTotal + freteValor,\n        maxInstallmentNoInterest: 6,\n        maxInstallment: 6,\n        brand: bandeira_cartao.name,\n        success: function success(data) {\n          _this4.props.setForm({\n            parcelasCartao: data.installments\n          });\n\n          _this4.props.setForm({\n            parcelasCartaoSelecionada: data.installments[bandeira_cartao.name][0]\n          });\n        },\n        error: function error(r) {\n          return console.log(r);\n        }\n      });\n    }\n  }, {\n    key: \"renderOpcoesPagamento\",\n    value: function renderOpcoesPagamento() {\n      var _this5 = this;\n\n      var tipoPagamentoSelecionado = this.props.tipoPagamentoSelecionado;\n      return __jsx(\"div\", {\n        className: \"flex horizontal\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 13\n        }\n      }, __jsx(\"div\", {\n        className: \"flex-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 17\n        }\n      }, __jsx(FormRadio, {\n        name: \"tipo_pagamento_selecionado\",\n        checked: tipoPagamentoSelecionado === 'boleto',\n        onChange: function onChange() {\n          return _this5.props.setTipoPagamento(\"boleto\");\n        },\n        label: \"Boleto Banc\\xE1rio\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 21\n        }\n      })), __jsx(\"div\", {\n        className: \"flex-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 17\n        }\n      }, __jsx(FormRadio, {\n        name: \"tipo_pagamento_selecionado\",\n        checked: tipoPagamentoSelecionado === 'cartao',\n        onChange: function onChange() {\n          return _this5.props.setTipoPagamento(\"cartao\");\n        },\n        label: \"Cart\\xE3o de Cr\\xE9dito\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 21\n        }\n      })));\n    }\n  }, {\n    key: \"validate\",\n    value: function validate() {\n      var tipoPagamentoSelecionado = this.props.tipoPagamentoSelecionado;\n      var _this$props$form3 = this.props.form,\n          CPF = _this$props$form3.CPF,\n          CPFboleto = _this$props$form3.CPFboleto,\n          numeroCartao = _this$props$form3.numeroCartao,\n          nomeCartao = _this$props$form3.nomeCartao,\n          mesCartao = _this$props$form3.mesCartao,\n          anoCartao = _this$props$form3.anoCartao,\n          parcelasCartaoSelecionada = _this$props$form3.parcelasCartaoSelecionada,\n          CVVCartao = _this$props$form3.CVVCartao;\n      var erros = {};\n\n      if (tipoPagamentoSelecionado === \"boleto\") {\n        if (!CPFboleto && !CPF) erros.CPFboleto = \"Preencha aqui com o seu CPF\";\n        if (CPFboleto && CPFboleto.length !== 14 && !validateCPF(CPFboleto)) erros.CPFboleto = \"Preencha aqui com o seu CPF corretamente\";\n      }\n\n      ;\n\n      if (tipoPagamentoSelecionado === \"cartao\") {\n        if (!numeroCartao || numeroCartao.length !== 19) erros.numeroCartao = \"Preencha aqui com o número do seu cartão\";\n        if (!nomeCartao) erros.nomeCartao = \"Preencha aqui com o nome que está no cartão\";\n        if (!mesCartao || mesCartao.length !== 2) erros.mesCartao = \"Preencha aqui com o mês de vencimento do cartão\";\n        if (!anoCartao || anoCartao.length !== 4) erros.anoCartao = \"Preencha aqui com o ano de vencimento do cartão\";\n        if (!parcelasCartaoSelecionada) erros.parcelasCartaoSelecionada = \"Selecione uma forma de pagamento\";\n        if (!CVVCartao || CVVCartao.length !== 3) erros.CVVCartao = \"Preencha aqui com o código de segurança do cartão\";\n      }\n\n      ;\n      this.setState({\n        erros: erros\n      });\n      return !(Object.keys(erros).length > 0);\n    }\n  }, {\n    key: \"renderPagamentoComBoleto\",\n    value: function renderPagamentoComBoleto() {\n      var _this6 = this;\n\n      var _this$props$form4 = this.props.form,\n          CPF = _this$props$form4.CPF,\n          CPFboleto = _this$props$form4.CPFboleto;\n      var erros = this.state.erros;\n      return __jsx(\"div\", {\n        className: \"Dados-Pagamento\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 13\n        }\n      }, __jsx(FormSimples, {\n        value: CPFboleto || CPF,\n        name: \"CPF\",\n        erro: erros.CPFboleto,\n        placeholder: \"CPF\",\n        label: \"CPF\",\n        onChange: function onChange(e) {\n          return _this6.onChange(\"CPFboleto\", formatCPF(e.target.value));\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 17\n        }\n      }));\n    }\n  }, {\n    key: \"renderPagamentoComCartao\",\n    value: function renderPagamentoComCartao() {\n      var _this7 = this;\n\n      var _this$props$form5 = this.props.form,\n          nomeCartao = _this$props$form5.nomeCartao,\n          numeroCartao = _this$props$form5.numeroCartao,\n          CVVCartao = _this$props$form5.CVVCartao,\n          mesCartao = _this$props$form5.mesCartao,\n          anoCartao = _this$props$form5.anoCartao,\n          parcelasCartao = _this$props$form5.parcelasCartao,\n          parcelasCartaoSelecionada = _this$props$form5.parcelasCartaoSelecionada,\n          bandeira_cartao = _this$props$form5.bandeira_cartao;\n      var erros = this.state.erros;\n      return __jsx(\"div\", {\n        className: \"Dados-Pagamento\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 13\n        }\n      }, __jsx(FormSimples, {\n        value: nomeCartao,\n        erro: erros.nomeCartao,\n        name: \"nomeCartao\",\n        placeholder: \"Nome como escrito no cart\\xE3o\",\n        label: \"Nome Completo no Cart\\xE3o\",\n        onChange: function onChange(e) {\n          return _this7.onChange(\"nomeCartao\", e.target.value);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 17\n        }\n      }), __jsx(\"div\", {\n        className: \"flex horizontal\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 17\n        }\n      }, __jsx(\"div\", {\n        className: \"flex-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 21\n        }\n      }, __jsx(FormSimples, {\n        value: numeroCartao,\n        erro: erros.numeroCartao,\n        name: \"numeroCartao\",\n        placeholder: \"XXXX XXXX XXXX XXXX\",\n        label: \"N\\xFAmero do Cart\\xE3o\",\n        onChange: function onChange(e) {\n          return _this7.onChange(\"numeroCartao\", formatCartao(e.target.value));\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 25\n        }\n      })), __jsx(\"div\", {\n        className: \"flex-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 21\n        }\n      }, __jsx(FormSimples, {\n        value: CVVCartao,\n        erro: erros.CVVCartao,\n        name: \"CVVCartao\",\n        placeholder: \"XXX\",\n        label: \"C\\xF3digo de Seguran\\xE7a do Cart\\xE3o\",\n        onChange: function onChange(e) {\n          return _this7.onChange(\"CVVCartao\", formatNumber(e.target.value, 3));\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 25\n        }\n      }))), __jsx(\"div\", {\n        className: \"form-input\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 17\n        }\n      }, __jsx(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 21\n        }\n      }, \" Data de Validade \")), __jsx(\"div\", {\n        className: \"flex\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 17\n        }\n      }, __jsx(FormSimples, {\n        value: mesCartao,\n        erro: erros.mesCartao,\n        name: \"mesCartao\",\n        placeholder: \"MM\",\n        label: \"M\\xEAs\",\n        onChange: function onChange(e) {\n          return _this7.onChange(\"mesCartao\", formatNumber(e.target.value, 2));\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 21\n        }\n      }), __jsx(\"span\", {\n        className: \"slash-pagamento\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 21\n        }\n      }, \" \\xA0 / \\xA0 \"), __jsx(FormSimples, {\n        value: anoCartao,\n        erro: erros.anoCartao,\n        name: \"anoCartao\",\n        placeholder: \"AAAA\",\n        label: \"Ano\",\n        onChange: function onChange(e) {\n          return _this7.onChange(\"anoCartao\", formatNumber(e.target.value, 4));\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 21\n        }\n      })), __jsx(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 17\n        }\n      }), __jsx(\"div\", {\n        className: \"form-input\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 17\n        }\n      }, __jsx(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 21\n        }\n      }, \" Parcelas \")), parcelasCartao && parcelasCartaoSelecionada && __jsx(\"div\", {\n        className: \"flex\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 25\n        }\n      }, __jsx(\"select\", {\n        name: \"parcela\",\n        value: parcelasCartaoSelecionada.quantity,\n        onChange: function onChange(e) {\n          return _this7.onChange(\"parcelasCartaoSelecionada\", parcelasCartao[bandeira_cartao.name][e.target.value - 1]);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 29\n        }\n      }, !parcelasCartaoSelecionada && __jsx(\"option\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 37\n        }\n      }, \" Selecione a quantidade de parcelas para pagamento \"), parcelasCartao[bandeira_cartao.name].slice(0, 6).map(function (item, index) {\n        return __jsx(\"option\", {\n          key: index,\n          value: item.quantity,\n          __self: _this7,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 41\n          }\n        }, item.quantity, \" x de \", formatMoney(item.totalAmount / item.quantity), \" sem juros\");\n      })), erros.parcelasCartaoSelecionada && __jsx(\"small\", {\n        className: \"erro\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 33\n        }\n      }, \" \", erros.parcelasCartaoSelecionada, \" \")));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var tipoPagamentoSelecionado = this.props.tipoPagamentoSelecionado;\n      return __jsx(\"div\", {\n        className: \"Dados-Pagamento-Container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 13\n        }\n      }, __jsx(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 17\n        }\n      }, \" DADOS DE PAGAMENTO \"), __jsx(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 17\n        }\n      }), this.renderOpcoesPagamento(), __jsx(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 17\n        }\n      }), __jsx(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 17\n        }\n      }), tipoPagamentoSelecionado === 'boleto' && this.renderPagamentoComBoleto(), tipoPagamentoSelecionado === 'cartao' && this.renderPagamentoComCartao());\n    }\n  }]);\n\n  return DadosPagamento;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    usuario: state.auth.usuario,\n    carrinho: state.carrinho.carrinho,\n    cliente: state.cliente.cliente,\n    form: state.checkout.form,\n    tipoPagamentoSelecionado: state.checkout.tipoPagamentoSelecionado,\n    sessionId: state.checkout.sessionId,\n    senderHash: state.checkout.senderHash,\n    freteSelecionado: state.carrinho.freteSelecionado\n  };\n};\n\nexport default connect(mapStateToProps, actions)(DadosPagamento);","map":{"version":3,"sources":["F:/ASSESSOR_ECO/ECO_LOJ/containers/Checkout/DadosPagamento.js"],"names":["React","Component","FormRadio","FormSimples","connect","actions","formatCPF","formatCartao","formatNumber","formatMoney","validateCPF","DadosPagamento","erros","field","value","props","setForm","then","validate","getSessionPagamento","prevProps","form","numeroCartao","mesCartao","anoCartao","CVVCartao","credit_card_token","bandeira_cartao","parcelasCartao","split","join","length","getBrand","submitCartaoHash","freteSelecionado","getParcelas","PagSeguroDirectPayment","cardBin","slice","success","r","brand","error","console","log","params","cardNumber","name","cvv","expirationMonth","expirationYear","card","token","createCardToken","carrinho","valorTotal","reduce","all","item","Number","precoUnitario","quantidade","freteValor","Valor","replace","getInstallments","amount","maxInstallmentNoInterest","maxInstallment","data","installments","parcelasCartaoSelecionada","tipoPagamentoSelecionado","setTipoPagamento","CPF","CPFboleto","nomeCartao","setState","Object","keys","state","e","onChange","target","quantity","map","index","totalAmount","renderOpcoesPagamento","renderPagamentoComBoleto","renderPagamentoComCartao","mapStateToProps","usuario","auth","cliente","checkout","sessionId","senderHash"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\n\r\nimport FormRadio from '../../components/Inputs/FormRadio';\r\nimport FormSimples from '../../components/Inputs/FormSimples';\r\n\r\nimport {connect} from 'react-redux';\r\nimport actions from '../../redux/actions';\r\nimport {formatCPF, formatCartao, formatNumber} from '../../utils/format';\r\nimport {formatMoney} from '../../utils';\r\nimport {validateCPF} from '../../utils/validate';\r\n\r\nclass DadosPagamento extends Component {\r\n\r\n    state = {erros: {}}\r\n\r\n    componentDidMount() {\r\n        this.props.getSessionPagamento();\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        const {\r\n            numeroCartao,\r\n            mesCartao,\r\n            anoCartao,\r\n            CVVCartao,\r\n            credit_card_token,\r\n            bandeira_cartao,\r\n            parcelasCartao\r\n        } = this.props.form;\r\n\r\n        if(!bandeira_cartao && numeroCartao && numeroCartao.split(' ').join('').length > 7){\r\n            this.getBrand();\r\n        }\r\n\r\n        if(\r\n            !credit_card_token &&\r\n            numeroCartao && numeroCartao.split(' ').join('').length === 16 &&\r\n            mesCartao && mesCartao.length === 2 &&\r\n            anoCartao && anoCartao.length === 4 &&\r\n            CVVCartao && CVVCartao.length === 3 &&\r\n            bandeira_cartao \r\n        ) this.submitCartaoHash();\r\n\r\n        if ((!parcelasCartao && bandeira_cartao) ||\r\n            (parcelasCartao && bandeira_cartao && prevProps.freteSelecionado !== this.props.freteSelecionado)\r\n        ) this.getParcelas();\r\n    }\r\n\r\n    getBrand(){\r\n        const { numeroCartao } = this.props.form;\r\n        PagSeguroDirectPayment.getBrand({\r\n            cardBin: numeroCartao.split(' ').join('').slice(0,6),\r\n            success: (r) =>this.props.setForm({ bandeira_cartao: r.brand }),\r\n            error: (r) => console.log(r)\r\n        });\r\n    }\r\n\r\n    submitCartaoHash() {\r\n        const {\r\n            numeroCartao,\r\n            mesCartao,\r\n            anoCartao,\r\n            CVVCartao,\r\n            bandeira_cartao\r\n        } = this.props.form;\r\n\r\n        const params = {\r\n            cardNumber: numeroCartao.split(' ').join(''),\r\n            brand: bandeira_cartao.name,\r\n            cvv: CVVCartao,\r\n            expirationMonth: mesCartao,\r\n            expirationYear: anoCartao,\r\n            success: (r) => {\r\n                this.props.setForm({credit_card_token: r.card.token})\r\n            },    \r\n            error: (r) => console.log(r)\r\n        };\r\n        PagSeguroDirectPayment.createCardToken(params);\r\n    }\r\n\r\n    getParcelas() {\r\n        const {freteSelecionado, carrinho} = this.props;\r\n        const {bandeira_cartao} = this.props.form;\r\n\r\n        let valorTotal = carrinho.reduce(\r\n                            (all, item) => \r\n                            all + (Number(item.precoUnitario) * Number(item.quantidade)), 0\r\n                        );\r\n        let freteValor = Number(freteSelecionado.Valor.replace(',', '.'));\r\n\r\n        PagSeguroDirectPayment.getInstallments({\r\n            amount: valorTotal + freteValor,\r\n            maxInstallmentNoInterest: 6,\r\n            maxInstallment: 6,\r\n            brand: bandeira_cartao.name,\r\n            success: (data) => {\r\n                this.props.setForm({parcelasCartao: data.installments});\r\n                this.props.setForm({parcelasCartaoSelecionada: data.installments[bandeira_cartao.name][0]});\r\n            },\r\n            error: (r) => console.log(r)\r\n        });\r\n    }\r\n\r\n    renderOpcoesPagamento() {\r\n        const {tipoPagamentoSelecionado} = this.props;\r\n        return (\r\n            <div className = \"flex horizontal\">\r\n                <div className = \"flex-1\">\r\n                    <FormRadio \r\n                        name = \"tipo_pagamento_selecionado\" \r\n                        checked = {tipoPagamentoSelecionado === 'boleto'} \r\n                        onChange = {() => this.props.setTipoPagamento(\"boleto\")}\r\n                        label = \"Boleto Bancário\" />\r\n                </div>\r\n                <div className = \"flex-1\">\r\n                    <FormRadio \r\n                        name = \"tipo_pagamento_selecionado\" \r\n                        checked = {tipoPagamentoSelecionado === 'cartao'} \r\n                        onChange = {() => this.props.setTipoPagamento(\"cartao\")}\r\n                        label = \"Cartão de Crédito\" />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    validate() {\r\n        const {tipoPagamentoSelecionado} = this.props;\r\n        const { \r\n            CPF, CPFboleto,\r\n            numeroCartao, nomeCartao, mesCartao, anoCartao, parcelasCartaoSelecionada, CVVCartao\r\n        } = this.props.form;\r\n        const erros = {};\r\n\r\n        if (tipoPagamentoSelecionado === \"boleto\") {\r\n            if (!CPFboleto && !CPF) erros.CPFboleto = \"Preencha aqui com o seu CPF\";\r\n            if (CPFboleto && CPFboleto.length !== 14 && !validateCPF(CPFboleto))\r\n                erros.CPFboleto = \"Preencha aqui com o seu CPF corretamente\";\r\n        };\r\n        if (tipoPagamentoSelecionado === \"cartao\") {\r\n            if (!numeroCartao || numeroCartao.length !== 19) erros.numeroCartao = \"Preencha aqui com o número do seu cartão\";\r\n            if (!nomeCartao) erros.nomeCartao = \"Preencha aqui com o nome que está no cartão\";\r\n            if (!mesCartao || mesCartao.length !== 2) erros.mesCartao = \"Preencha aqui com o mês de vencimento do cartão\";\r\n            if (!anoCartao || anoCartao.length !== 4) erros.anoCartao = \"Preencha aqui com o ano de vencimento do cartão\";\r\n            if (!parcelasCartaoSelecionada) erros.parcelasCartaoSelecionada = \"Selecione uma forma de pagamento\";\r\n            if (!CVVCartao || CVVCartao.length !== 3) erros.CVVCartao = \"Preencha aqui com o código de segurança do cartão\";\r\n        };\r\n        \r\n        this.setState({erros});\r\n        return !(Object.keys(erros).length > 0);\r\n    }\r\n\r\n    onChange = (field, value) => this.props.setForm({[field]: value}).then(() => this.validate());\r\n\r\n    renderPagamentoComBoleto() {\r\n        const {CPF, CPFboleto} = this.props.form;\r\n        const {erros} = this.state;\r\n        return (\r\n            <div className = \"Dados-Pagamento\">\r\n                <FormSimples \r\n                    value = {CPFboleto || CPF}\r\n                    name = \"CPF\" \r\n                    erro = {erros.CPFboleto}\r\n                    placeholder = \"CPF\" \r\n                    label = \"CPF\" \r\n                    onChange = {(e) => this.onChange(\"CPFboleto\", formatCPF(e.target.value))} />\r\n            </div>\r\n        )\r\n    }\r\n\r\n    renderPagamentoComCartao() {\r\n        const { \r\n            nomeCartao, \r\n            numeroCartao, \r\n            CVVCartao, \r\n            mesCartao, \r\n            anoCartao, \r\n            parcelasCartao, \r\n            parcelasCartaoSelecionada,\r\n            bandeira_cartao\r\n        } = this.props.form;\r\n        const {erros} = this.state;\r\n        return (\r\n            <div className = \"Dados-Pagamento\">\r\n                <FormSimples \r\n                    value = {nomeCartao} \r\n                    erro = {erros.nomeCartao}\r\n                    name = \"nomeCartao\" \r\n                    placeholder = \"Nome como escrito no cartão\" \r\n                    label = \"Nome Completo no Cartão\" \r\n                    onChange = {(e) => this.onChange(\"nomeCartao\", e.target.value)} />\r\n                <div className = \"flex horizontal\">\r\n                    <div className = \"flex-1\">\r\n                        <FormSimples \r\n                            value = {numeroCartao} \r\n                            erro = {erros.numeroCartao}\r\n                            name = \"numeroCartao\" \r\n                            placeholder = \"XXXX XXXX XXXX XXXX\" \r\n                            label = \"Número do Cartão\" \r\n                            onChange = {(e) => this.onChange(\"numeroCartao\", formatCartao(e.target.value))} />\r\n                    </div>\r\n                    <div className = \"flex-1\">\r\n                        <FormSimples \r\n                            value = {CVVCartao} \r\n                            erro = {erros.CVVCartao}\r\n                            name = \"CVVCartao\" \r\n                            placeholder = \"XXX\" \r\n                            label = \"Código de Segurança do Cartão\" \r\n                            onChange = {(e) => this.onChange(\"CVVCartao\", formatNumber(e.target.value, 3))} />\r\n                    </div>\r\n                </div>\r\n                <div className = \"form-input\">\r\n                    <label> Data de Validade </label>\r\n                </div>\r\n                <div className = \"flex\">\r\n                    <FormSimples \r\n                        value = {mesCartao} \r\n                        erro = {erros.mesCartao}\r\n                        name = \"mesCartao\" \r\n                        placeholder = \"MM\" \r\n                        label = \"Mês\" \r\n                        onChange = {(e) => this.onChange(\"mesCartao\", formatNumber(e.target.value, 2))} />\r\n                    <span className = \"slash-pagamento\"> &nbsp; / &nbsp; </span>\r\n                    <FormSimples \r\n                        value = {anoCartao} \r\n                        erro = {erros.anoCartao}\r\n                        name = \"anoCartao\" \r\n                        placeholder = \"AAAA\" \r\n                        label = \"Ano\" \r\n                        onChange = {(e) => this.onChange(\"anoCartao\", formatNumber(e.target.value, 4))} />\r\n                </div>\r\n                <br />\r\n                <div className = \"form-input\">\r\n                    <label> Parcelas </label>\r\n                </div>\r\n                {\r\n                    parcelasCartao && parcelasCartaoSelecionada && (\r\n                        <div className = \"flex\">\r\n                            <select \r\n                                name = \"parcela\" \r\n                                value = {parcelasCartaoSelecionada.quantity}\r\n                                onChange = {(e) => this.onChange(\"parcelasCartaoSelecionada\", parcelasCartao[bandeira_cartao.name][e.target.value - 1])}>\r\n                                { \r\n                                    !parcelasCartaoSelecionada &&\r\n                                    <option> Selecione a quantidade de parcelas para pagamento </option>\r\n                                }\r\n                                {\r\n                                    parcelasCartao[bandeira_cartao.name]\r\n                                    .slice(0,6)\r\n                                    .map((item, index) => (\r\n                                        <option key= {index} value={item.quantity}>\r\n                                            {item.quantity} x de {formatMoney(item.totalAmount / item.quantity)} sem juros\r\n                                        </option> \r\n                                    ))\r\n                                }                               \r\n                            </select>\r\n                            {erros.parcelasCartaoSelecionada && (\r\n                                <small className = \"erro\"> {erros.parcelasCartaoSelecionada} </small>\r\n                            )}\r\n                        </div>\r\n                    )\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n\r\n    render () {\r\n        const {tipoPagamentoSelecionado} = this.props;\r\n        return (\r\n            <div className = \"Dados-Pagamento-Container\">\r\n                <h2> DADOS DE PAGAMENTO </h2>\r\n                <br />\r\n                {this.renderOpcoesPagamento()}\r\n                <br />\r\n                <br />\r\n                {tipoPagamentoSelecionado === 'boleto' && this.renderPagamentoComBoleto()}\r\n                {tipoPagamentoSelecionado === 'cartao' && this.renderPagamentoComCartao()}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    usuario: state.auth.usuario,\r\n    carrinho: state.carrinho.carrinho,\r\n    cliente: state.cliente.cliente,\r\n    form: state.checkout.form,\r\n    tipoPagamentoSelecionado: state.checkout.tipoPagamentoSelecionado,\r\n    sessionId: state.checkout.sessionId,\r\n    senderHash: state.checkout.senderHash,\r\n    freteSelecionado: state.carrinho.freteSelecionado\r\n});\r\n\r\nexport default connect(mapStateToProps, actions) (DadosPagamento);"]},"metadata":{},"sourceType":"module"}
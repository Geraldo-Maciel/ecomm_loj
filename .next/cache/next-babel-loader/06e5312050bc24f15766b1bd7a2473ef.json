{"ast":null,"code":"import { FETCH_CLIENTE, LOGOUT_CLIENTE } from '../types';\nimport axios from 'axios';\nimport { API, versao, loja } from '../../config';\nimport { setCookie } from '../../utils/cookie';\nimport { getHeaders } from './helpers';\nimport Router from 'next/router';\nimport { autenticar, desautenticar } from './authActions';\nimport errorHandling from './errorHandling';\nexport const getRawData = data => {\n  let _data = data.split('/');\n\n  let ano = _data[2];\n  let _mes = _data[1];\n  let mes = _mes < 10 ? \"0\" + _mes : _mes;\n  let _dia = _data[0]; //    let _dia = Number(_data[0]) + 1;\n\n  let dia = _dia < 10 ? \"0\" + _dia : _dia;\n  return `${ano}-${mes}-${dia}`;\n};\nexport const fetchCliente = (id, token) => dispatch => {\n  axios.get(`${API}/${versao}/api/clientes/${id}?loja=${loja}`, getHeaders(token)).then(resposta => {\n    dispatch({\n      type: FETCH_CLIENTE,\n      payload: resposta.data\n    });\n  }).catch(e => console.log(e));\n};\nexport const newCliente = (form, cb) => dispatch => {\n  axios.post(`${API}/${versao}/api/clientes?loja=${loja}`, {\n    nome: form.nome,\n    senha: form.senha,\n    cpf: form.CPF,\n    email: form.email,\n    telefones: [form.telefone],\n    endereco: {\n      local: form.local,\n      numero: form.numero,\n      complemento: form.complemento,\n      bairro: form.bairro,\n      cidade: form.cidade,\n      estado: form.estado,\n      CEP: form.CEP\n    },\n    dataDeNascimento: getRawData(form.dataDeNascimento)\n  }).then(response => {\n    dispatch({\n      type: FETCH_CLIENTE,\n      payload: response.data\n    });\n    dispatch(autenticar({\n      email: form.email,\n      senha: form.senha\n    }, null, cb));\n    cb(null);\n  }).catch(e => cb(errorHandling(e)));\n};\nexport const updateCliente = (form, id, token, cb) => dispatch => {\n  axios.put(`${API}/${versao}/api/clientes/${id}?loja=${loja}`, {\n    nome: form.nome,\n    cpf: form.CPF,\n    telefones: [form.telefone],\n    endereco: {\n      local: form.local,\n      numero: form.numero,\n      complemento: form.complemento,\n      bairro: form.bairro,\n      cidade: form.cidade,\n      estado: form.estado,\n      CEP: form.CEP\n    },\n    dataDeNascimento: getRawData(form.dataDeNascimento)\n  }, getHeaders(token)).then(response => {\n    dispatch({\n      type: FETCH_CLIENTE,\n      payload: response.data\n    });\n    cb(null);\n  }).catch(e => cb(errorHandling(e)));\n};\nexport const logoutCliente = () => dispatch => {\n  dispatch(desautenticar());\n  dispatch({\n    type: LOGOUT_CLIENTE\n  });\n};\nexport default {\n  fetchCliente,\n  newCliente,\n  updateCliente,\n  logoutCliente\n};","map":{"version":3,"sources":["F:/APLICACAO/lojavirtual/redux/actions/clienteActions.js"],"names":["FETCH_CLIENTE","LOGOUT_CLIENTE","axios","API","versao","loja","setCookie","getHeaders","Router","autenticar","desautenticar","errorHandling","getRawData","data","_data","split","ano","_mes","mes","_dia","dia","fetchCliente","id","token","dispatch","get","then","resposta","type","payload","catch","e","console","log","newCliente","form","cb","post","nome","senha","cpf","CPF","email","telefones","telefone","endereco","local","numero","complemento","bairro","cidade","estado","CEP","dataDeNascimento","response","updateCliente","put","logoutCliente"],"mappings":"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","sourcesContent":["import { \r\n    FETCH_CLIENTE,\r\n    LOGOUT_CLIENTE\r\n} from '../types';\r\nimport axios from 'axios';\r\nimport {API, versao, loja} from '../../config';\r\nimport {setCookie} from '../../utils/cookie';\r\nimport {getHeaders} from './helpers';\r\nimport Router from 'next/router';\r\nimport {autenticar, desautenticar} from './authActions';\r\nimport errorHandling from './errorHandling';\r\n\r\nexport const getRawData = (data) => {\r\n    let _data = data.split('/');\r\n    let ano = _data[2];\r\n    let _mes = _data[1];\r\n    let mes = _mes < 10 ? \"0\" + _mes : _mes;\r\n    let _dia = _data[0];\r\n//    let _dia = Number(_data[0]) + 1;\r\n    let dia = _dia < 10 ? \"0\" + _dia: _dia;\r\n    return `${ano}-${mes}-${dia}`;\r\n};\r\n\r\nexport const fetchCliente = (id, token) => dispatch => {\r\n    axios.get(`${API}/${versao}/api/clientes/${id}?loja=${loja}`, getHeaders(token))\r\n    .then ((resposta) => {\r\n        dispatch({type: FETCH_CLIENTE, payload: resposta.data})\r\n    })\r\n    .catch (e => console.log(e));\r\n}\r\n\r\nexport const newCliente = (form, cb) => dispatch => {\r\n    axios.post(`${API}/${versao}/api/clientes?loja=${loja}`, {\r\n        nome: form.nome,\r\n        senha: form.senha,\r\n        cpf: form.CPF,\r\n        email: form.email,\r\n        telefones: [form.telefone],\r\n        endereco: {\r\n            local: form.local,\r\n            numero: form.numero,\r\n            complemento: form.complemento,\r\n            bairro: form.bairro,\r\n            cidade: form.cidade,\r\n            estado: form.estado,\r\n            CEP: form.CEP\r\n        },\r\n        dataDeNascimento: getRawData(form.dataDeNascimento)\r\n    })\r\n    .then ((response) => {\r\n        dispatch({type: FETCH_CLIENTE, payload: response.data});\r\n        dispatch(autenticar({email: form.email, senha: form.senha}, null, cb));\r\n        cb(null);\r\n    })\r\n    .catch (e => cb(errorHandling(e)));\r\n};\r\n\r\nexport const updateCliente = (form, id, token, cb) => dispatch => {\r\n    axios.put(`${API}/${versao}/api/clientes/${id}?loja=${loja}`, {\r\n        nome: form.nome,\r\n        cpf: form.CPF,\r\n        telefones: [form.telefone],\r\n        endereco: {\r\n            local: form.local,\r\n            numero: form.numero,\r\n            complemento: form.complemento,\r\n            bairro: form.bairro,\r\n            cidade: form.cidade,\r\n            estado: form.estado,\r\n            CEP: form.CEP\r\n        },\r\n        dataDeNascimento: getRawData(form.dataDeNascimento)\r\n    }, getHeaders(token))\r\n    .then ((response) => {\r\n        dispatch({type: FETCH_CLIENTE, payload: response.data});\r\n        cb(null);\r\n    })\r\n    .catch (e => cb(errorHandling(e)));\r\n}\r\n\r\nexport const logoutCliente = () => dispatch => {\r\n    dispatch(desautenticar());\r\n    dispatch({type: LOGOUT_CLIENTE})\r\n}\r\n\r\nexport default {\r\n    fetchCliente,\r\n    newCliente,\r\n    updateCliente,\r\n    logoutCliente\r\n};"]},"metadata":{},"sourceType":"module"}
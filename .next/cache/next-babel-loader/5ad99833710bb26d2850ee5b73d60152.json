{"ast":null,"code":"var _jsxFileName = \"F:\\\\APLICACAO\\\\lojavirtual\\\\containers\\\\AreaDoCliente\\\\Dados\\\\FormularioDados.js\";\nvar __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport FormSimples from '../../../components/Inputs/FormSimples';\nimport TextoDados from '../../../components/Texto/Dados';\nimport { ESTADOS } from '../../../utils';\nimport { connect } from 'react-redux';\nimport actions from '../../../redux/actions';\nimport AlertGeral from '../../../components/Alert/Geral';\nimport { validateCPF } from '../../../utils/validate';\nimport { formatCEP, formatCPF, formatDataDeNascimento, formatNumber, formatTelefone } from '../../../utils/format';\nimport moment from 'moment';\n\nclass FormularioDados extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      nome: \"\",\n      CPF: \"\",\n      telefone: \"\",\n      dataDeNascimento: \"\",\n      local: \"\",\n      numero: \"\",\n      complemento: \"\",\n      bairro: \"\",\n      cidade: \"\",\n      estado: \"\",\n      CEP: \"\",\n      aviso: null,\n      erros: {}\n    });\n\n    _defineProperty(this, \"updateState\", cliente => {\n      this.setState({\n        nome: cliente.nome,\n        CPF: cliente.cpf,\n        telefone: cliente.telefones[0],\n        dataDeNascimento: moment(cliente.dataDeNascimento).format('DD/MM/YYYY'),\n        local: cliente.endereco.local,\n        numero: cliente.endereco.numero,\n        complemento: cliente.endereco.complemento || \"\",\n        bairro: cliente.endereco.bairro,\n        cidade: cliente.endereco.cidade,\n        estado: cliente.endereco.estado,\n        CEP: cliente.endereco.CEP\n      });\n    });\n\n    _defineProperty(this, \"onChange\", (f, v) => this.setState({\n      [f]: v\n    }, () => this.validate()));\n  }\n\n  componentDidMount() {\n    if (this.props.cliente) this.updateState(this.props.cliente);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (!prevProps.cliente && this.props.cliente || prevProps.cliente && this.props.cliente && prevProps.cliente.updatedAt !== this.props.cliente.updatedAt) this.updateState(this.props.cliente);\n  }\n\n  validate() {\n    const {\n      nome,\n      CPF,\n      dataDeNascimento,\n      telefone,\n      local,\n      numero,\n      bairro,\n      cidade,\n      estado,\n      CEP\n    } = this.state;\n    const erros = {};\n    if (!nome) erros.nome = \"Preencha aqui com o seu nome\";\n    if (!CPF || CPF.length !== 14) erros.CPF = \"Preencha aqui com o seu CPF\";\n    if (CPF && CPF.length === 14 && !validateCPF(CPF)) erros.CPF = \"Preencha aqui com o seu CPF corretamente\";\n    if (!dataDeNascimento || dataDeNascimento.length !== 10) erros.dataDeNascimento = \"Preencha aqui com a sua data de nascimento\";\n    if (!telefone || telefone.length < 11) erros.telefone = \"Preencha aqui com o seu telefone\";\n    if (!local) erros.local = \"Preencha aqui com a sua rua/avenida\";\n    if (!numero) erros.numero = \"Preencha aqui com o seu número\";\n    if (!bairro) erros.bairro = \"Preencha aqui com o seu bairro\";\n    if (!cidade) erros.cidade = \"Preencha aqui com a sua cidade\";\n    if (!estado) erros.estado = \"Preencha aqui com o seu estado\";\n    if (!CEP || CEP.length !== 9) erros.CEP = \"Preencha aqui com o seu CEP\";\n    this.setState({\n      erros,\n      aviso: null\n    });\n    return Object.keys(erros).length === 0;\n  }\n\n  handleSubmit() {\n    const {\n      cliente,\n      token\n    } = this.props;\n    if (!cliente || !token || !this.validate()) return null;\n    this.props.updateCliente(this.state, cliente._id, token, error => {\n      if (error) this.setState({\n        aviso: {\n          status: false,\n          message: error.message\n        }\n      });else alert(\"Dados atualizados com sucesso!\");\n    });\n  }\n\n  render() {\n    const {\n      nome,\n      CPF,\n      telefone,\n      dataDeNascimento,\n      local,\n      numero,\n      complemento,\n      bairro,\n      cidade,\n      estado,\n      CEP,\n      erros\n    } = this.state;\n    const {\n      usuario\n    } = this.props;\n    return __jsx(\"div\", {\n      className: \"flex-4 conteudo-area-cliente\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 13\n      }\n    }, __jsx(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }\n    }, \"MEUS DADOS\"), __jsx(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }\n    }), __jsx(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }\n    }), __jsx(\"div\", {\n      className: \"form-dados\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 17\n      }\n    }, __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 21\n      }\n    }, __jsx(TextoDados, {\n      chave: \"E-mail\",\n      valor: usuario ? usuario.email : \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 25\n      }\n    })), __jsx(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 21\n      }\n    }), __jsx(FormSimples, {\n      label: \"Nome\",\n      erro: erros.nome,\n      onChange: e => this.onChange(\"nome\", e.target.value),\n      value: nome,\n      name: \"nome\",\n      type: \"text\",\n      placeholder: \"Nome\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 21\n      }\n    }), __jsx(FormSimples, {\n      label: \"CPF\",\n      erro: erros.CPF,\n      onChange: e => this.onChange(\"CPF\", formatCPF(e.target.value)),\n      value: CPF,\n      name: \"CPF\",\n      type: \"text\",\n      placeholder: \"CPF\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 21\n      }\n    }), __jsx(\"div\", {\n      className: \"flex horizontal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 21\n      }\n    }, __jsx(\"div\", {\n      className: \"flex-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 25\n      }\n    }, __jsx(FormSimples, {\n      label: \"Telefone\",\n      erro: erros.telefone,\n      onChange: e => this.onChange(\"telefone\", formatTelefone(e.target.value)),\n      value: telefone,\n      name: \"telefone\",\n      type: \"text\",\n      placeholder: \"Telefone\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 29\n      }\n    })), __jsx(\"div\", {\n      className: \"flex-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 25\n      }\n    }, __jsx(FormSimples, {\n      erro: erros.dataDeNascimento,\n      onChange: e => this.onChange(\"dataDeNascimento\", formatDataDeNascimento(e.target.value)),\n      value: dataDeNascimento,\n      name: \"dataDeNascimento\",\n      type: \"text\",\n      placeholder: \"DD/MM/YYYY\",\n      label: \"Data de Nascimento\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 29\n      }\n    }))), __jsx(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 21\n      }\n    }), __jsx(\"div\", {\n      className: \"flex horizontal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 21\n      }\n    }, __jsx(\"div\", {\n      className: \"flex-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 25\n      }\n    }, __jsx(FormSimples, {\n      label: \"Endere\\xE7o\",\n      erro: erros.local,\n      onChange: e => this.onChange(\"local\", e.target.value),\n      value: local,\n      name: \"local\",\n      placeholder: \"Endere\\xE7o\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 29\n      }\n    })), __jsx(\"div\", {\n      className: \"flex-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 25\n      }\n    }, __jsx(FormSimples, {\n      label: \"N\\xFAmero\",\n      erro: erros.numero,\n      onChange: e => this.onChange(\"numero\", formatNumber(e.target.value)),\n      value: numero,\n      name: \"numero\",\n      placeholder: \"N\\xFAmero\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 29\n      }\n    }))), __jsx(\"div\", {\n      className: \"flex horizontal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 21\n      }\n    }, __jsx(\"div\", {\n      className: \"flex-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 25\n      }\n    }, __jsx(FormSimples, {\n      label: \"Bairro\",\n      erro: erros.bairro,\n      onChange: e => this.onChange(\"bairro\", e.target.value),\n      value: bairro,\n      name: \"bairro\",\n      placeholder: \"Bairro\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 29\n      }\n    })), __jsx(\"div\", {\n      className: \"flex-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 25\n      }\n    }, __jsx(FormSimples, {\n      label: \"Complemento\",\n      erro: erros.complemento,\n      onChange: e => this.onChange(\"complemento\", e.target.value),\n      value: complemento,\n      name: \"complemento\",\n      placeholder: \"Complemento\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 29\n      }\n    }))), __jsx(\"div\", {\n      className: \"flex horizontal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 21\n      }\n    }, __jsx(\"div\", {\n      className: \"flex-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 25\n      }\n    }, __jsx(FormSimples, {\n      label: \"Cidade\",\n      erro: erros.cidade,\n      onChange: e => this.onChange(\"cidade\", e.target.value),\n      value: cidade,\n      name: \"cidade\",\n      placeholder: \"Cidade\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 29\n      }\n    })), __jsx(\"div\", {\n      className: \"form-input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 25\n      }\n    }, __jsx(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 29\n      }\n    }, \"Estado\"), __jsx(\"select\", {\n      name: \"estado\",\n      value: estado,\n      onChange: e => this.onChange(\"estado\", e.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 29\n      }\n    }, __jsx(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 33\n      }\n    }, \"Selecione seu estado\"), Object.keys(ESTADOS).map(abbr => __jsx(\"option\", {\n      key: abbr,\n      value: abbr,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 48\n      }\n    }, ESTADOS[abbr]))), erros.estado && __jsx(\"small\", {\n      className: \"erro\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 48\n      }\n    }, erros.estado))), __jsx(FormSimples, {\n      erro: erros.CEP,\n      onChange: e => this.onChange(\"CEP\", formatCEP(e.target.value)),\n      value: CEP,\n      name: \"CEP\",\n      placeholder: \"12345-789\",\n      label: \"CEP\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 21\n      }\n    })), __jsx(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 17\n      }\n    }), __jsx(AlertGeral, {\n      aviso: this.state.aviso,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 17\n      }\n    }), __jsx(\"div\", {\n      className: \"flex flex-start\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 17\n      }\n    }, __jsx(\"button\", {\n      className: \"btn btn-primary\",\n      onClick: () => this.handleSubmit(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 21\n      }\n    }, \"SALVAR\")));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  token: state.auth.token,\n  usuario: state.auth.usuario,\n  cliente: state.cliente.cliente\n});\n\nexport default connect(mapStateToProps, actions)(FormularioDados);","map":{"version":3,"sources":["F:/APLICACAO/lojavirtual/containers/AreaDoCliente/Dados/FormularioDados.js"],"names":["React","Component","FormSimples","TextoDados","ESTADOS","connect","actions","AlertGeral","validateCPF","formatCEP","formatCPF","formatDataDeNascimento","formatNumber","formatTelefone","moment","FormularioDados","nome","CPF","telefone","dataDeNascimento","local","numero","complemento","bairro","cidade","estado","CEP","aviso","erros","cliente","setState","cpf","telefones","format","endereco","f","v","validate","componentDidMount","props","updateState","componentDidUpdate","prevProps","updatedAt","state","length","Object","keys","handleSubmit","token","updateCliente","_id","error","status","message","alert","render","usuario","email","e","onChange","target","value","map","abbr","mapStateToProps","auth"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\n\r\nimport FormSimples from '../../../components/Inputs/FormSimples';\r\nimport TextoDados from '../../../components/Texto/Dados';\r\nimport { ESTADOS } from '../../../utils';\r\n\r\nimport { connect } from 'react-redux';\r\nimport actions from '../../../redux/actions';\r\n\r\nimport AlertGeral from '../../../components/Alert/Geral';\r\nimport { validateCPF } from '../../../utils/validate';\r\nimport { formatCEP, formatCPF, formatDataDeNascimento, \r\n    formatNumber, formatTelefone } from '../../../utils/format';\r\nimport moment from 'moment';\r\n\r\nclass FormularioDados extends Component {    \r\n    state = {\r\n        nome: \"\",\r\n        CPF: \"\",\r\n        telefone: \"\",\r\n        dataDeNascimento: \"\",\r\n        local: \"\",\r\n        numero: \"\",\r\n        complemento: \"\",\r\n        bairro: \"\",\r\n        cidade: \"\",\r\n        estado: \"\",\r\n        CEP: \"\",\r\n        aviso: null,\r\n        erros: {}\r\n    };\r\n\r\n    updateState = (cliente) => {\r\n        this.setState({\r\n            nome: cliente.nome,\r\n            CPF: cliente.cpf,\r\n            telefone: cliente.telefones[0],\r\n            dataDeNascimento: moment(cliente.dataDeNascimento).format('DD/MM/YYYY'),\r\n            local: cliente.endereco.local,\r\n            numero: cliente.endereco.numero,\r\n            complemento: cliente.endereco.complemento || \"\",\r\n            bairro: cliente.endereco.bairro,\r\n            cidade: cliente.endereco.cidade,\r\n            estado: cliente.endereco.estado,\r\n            CEP: cliente.endereco.CEP\r\n        });\r\n    }\r\n\r\n    componentDidMount(){\r\n        if(this.props.cliente) this.updateState(this.props.cliente);\r\n    }\r\n\r\n    componentDidUpdate(prevProps){\r\n        if(\r\n            (!prevProps.cliente && this.props.cliente) ||\r\n            (  prevProps.cliente && this.props.cliente && \r\n               prevProps.cliente.updatedAt !== this.props.cliente.updatedAt  )\r\n        ) this.updateState(this.props.cliente);\r\n    }\r\n\r\n    validate(){\r\n        const {  \r\n            nome, CPF, dataDeNascimento, telefone,\r\n            local, numero, bairro, cidade, estado, CEP\r\n        } = this.state;\r\n        const erros = {};\r\n\r\n        if(!nome) erros.nome = \"Preencha aqui com o seu nome\";\r\n        if(!CPF || CPF.length !== 14) erros.CPF = \"Preencha aqui com o seu CPF\";\r\n        if(CPF && CPF.length === 14 && !validateCPF(CPF)) \r\n            erros.CPF = \"Preencha aqui com o seu CPF corretamente\";\r\n        if(!dataDeNascimento || dataDeNascimento.length !== 10)\r\n            erros.dataDeNascimento = \"Preencha aqui com a sua data de nascimento\";\r\n        if(!telefone || telefone.length < 11) erros.telefone = \"Preencha aqui com o seu telefone\";\r\n\r\n        if(!local) erros.local = \"Preencha aqui com a sua rua/avenida\";\r\n        if(!numero) erros.numero = \"Preencha aqui com o seu número\";\r\n        if(!bairro) erros.bairro = \"Preencha aqui com o seu bairro\";\r\n        if(!cidade) erros.cidade = \"Preencha aqui com a sua cidade\";\r\n        if(!estado) erros.estado = \"Preencha aqui com o seu estado\";\r\n        if(!CEP || CEP.length !== 9) erros.CEP = \"Preencha aqui com o seu CEP\";\r\n        \r\n        this.setState({ erros, aviso: null });\r\n        return (Object.keys(erros).length === 0);\r\n    }\r\n\r\n    handleSubmit(){\r\n        const { cliente, token } = this.props;\r\n        if(!cliente || !token || !this.validate()) return null;\r\n        this.props.updateCliente(this.state, cliente._id, token, (error) => {\r\n            if(error) this.setState({ aviso: { status: false, message: error.message } });\r\n            else alert(\"Dados atualizados com sucesso!\");\r\n        });\r\n    }\r\n\r\n    onChange = (f, v) => this.setState({ [f]: v }, () => this.validate());\r\n\r\n    render(){\r\n        const {\r\n            nome, CPF, telefone, dataDeNascimento,\r\n            local, numero, complemento, bairro, cidade, estado, CEP,\r\n            erros\r\n        } = this.state;\r\n        const { usuario } = this.props;\r\n        return (\r\n            <div className=\"flex-4 conteudo-area-cliente\">\r\n                <h2>MEUS DADOS</h2>\r\n                <br />\r\n                <br />\r\n                <div className=\"form-dados\">\r\n                    <div>\r\n                        <TextoDados chave=\"E-mail\" valor={usuario ? usuario.email : \"\"} />\r\n                    </div>\r\n                    <br />\r\n                    <FormSimples  label=\"Nome\"\r\n                        erro={erros.nome} \r\n                        onChange={(e) => this.onChange(\"nome\", e.target.value)}\r\n                        value={nome} name=\"nome\" type=\"text\" placeholder=\"Nome\" />\r\n                    <FormSimples  label=\"CPF\"\r\n                        erro={erros.CPF} \r\n                        onChange={(e) => this.onChange(\"CPF\", formatCPF(e.target.value))}\r\n                        value={CPF} name=\"CPF\" type=\"text\" placeholder=\"CPF\" />\r\n                    <div className=\"flex horizontal\">\r\n                        <div className=\"flex-1\">\r\n                            <FormSimples label=\"Telefone\"\r\n                                erro={erros.telefone} \r\n                                onChange={(e) => this.onChange(\"telefone\", formatTelefone(e.target.value))}\r\n                                value={telefone} name=\"telefone\" type=\"text\" placeholder=\"Telefone\" />\r\n                        </div>\r\n                        <div className=\"flex-1\">                        \r\n                            <FormSimples \r\n                                erro={erros.dataDeNascimento} \r\n                                onChange={(e) => this.onChange(\r\n                                        \"dataDeNascimento\", \r\n                                        formatDataDeNascimento(e.target.value)\r\n                                    )}\r\n                                value={dataDeNascimento} name=\"dataDeNascimento\" \r\n                                type=\"text\" placeholder=\"DD/MM/YYYY\" label=\"Data de Nascimento\" />\r\n                        </div>\r\n                    </div>                  \r\n                    <br />\r\n                    <div className=\"flex horizontal\">\r\n                        <div className=\"flex-3\">\r\n                            <FormSimples label=\"Endereço\"\r\n                                erro={erros.local} \r\n                                onChange={(e) => this.onChange(\"local\", e.target.value)}\r\n                                value={local} name=\"local\" placeholder=\"Endereço\" />\r\n                        </div>\r\n                        <div className=\"flex-1\">                        \r\n                            <FormSimples  label=\"Número\"\r\n                                erro={erros.numero} \r\n                                onChange={(e) => this.onChange(\"numero\", formatNumber(e.target.value))}\r\n                                value={numero} name=\"numero\" placeholder=\"Número\" />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"flex horizontal\">\r\n                        <div className=\"flex-1\">\r\n                            <FormSimples  label=\"Bairro\"\r\n                                erro={erros.bairro} \r\n                                onChange={(e) => this.onChange(\"bairro\", e.target.value)}\r\n                                value={bairro} name=\"bairro\" placeholder=\"Bairro\" />\r\n                        </div>\r\n                        <div className=\"flex-1\">                        \r\n                            <FormSimples  label=\"Complemento\"\r\n                                erro={erros.complemento} \r\n                                onChange={(e) => this.onChange(\"complemento\", e.target.value)}\r\n                                value={complemento} name=\"complemento\" placeholder=\"Complemento\" />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"flex horizontal\">\r\n                        <div className=\"flex-1\">\r\n                            <FormSimples label=\"Cidade\"\r\n                                erro={erros.cidade} \r\n                                onChange={(e) => this.onChange(\"cidade\", e.target.value)}\r\n                                value={cidade} name=\"cidade\" placeholder=\"Cidade\" />\r\n                        </div>\r\n                        <div className=\"form-input\">\r\n                            <label>Estado</label>\r\n                            <select name=\"estado\" value={estado} \r\n                                onChange={(e) => this.onChange(\"estado\", e.target.value)}>\r\n                                <option>Selecione seu estado</option>\r\n                                { Object.keys(ESTADOS).map(\r\n                                    (abbr) => (<option key={abbr} value={abbr}>{ESTADOS[abbr]}</option>)\r\n                                ) }\r\n                            </select>\r\n                            { erros.estado && (<small className=\"erro\">{erros.estado}</small>) }\r\n                        </div>\r\n                    </div>                    \r\n                    <FormSimples erro={erros.CEP} \r\n                            onChange={(e) => this.onChange(\"CEP\", formatCEP(e.target.value))}\r\n                            value={CEP} name=\"CEP\" placeholder=\"12345-789\" label=\"CEP\" />\r\n                </div>\r\n                <br />\r\n                <AlertGeral aviso={this.state.aviso} />\r\n                <div className=\"flex flex-start\">\r\n                    <button \r\n                        className=\"btn btn-primary\"\r\n                        onClick={() => this.handleSubmit()} >\r\n                        SALVAR\r\n                    </button>\r\n                </div>                \r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    token: state.auth.token,\r\n    usuario: state.auth.usuario,\r\n    cliente: state.cliente.cliente\r\n});\r\n\r\nexport default connect(mapStateToProps, actions)(FormularioDados);"]},"metadata":{},"sourceType":"module"}